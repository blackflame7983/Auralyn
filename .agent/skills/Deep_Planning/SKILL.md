---
name: deep-planning
description: 複雑な機能のための高度な計画と実行スキル。「コーディングの前に考える」ことを強制します。
---

# ディープ・プランニング & 実行 (Deep Planning & Execution)

複雑な機能（複数ファイルの変更、アーキテクチャの変更、新しいモジュール）にはこのスキルを使用してください。

## フェーズ 1: 計画 (Writing Plans)

**コンテキスト**: 専用の計画ファイルを作成します: `docs/plans/YYYY-MM-DD-<topic>.md`。
（※VSTHostプロジェクトでは、`.gemini/antigravity/brain/`配下の `implementation_plan.md` を使用することも検討してください）

**ヘッダーフォーマット**:
```markdown
# [機能名] 実装計画書
**ゴール**: ...
**アーキテクチャ**: ...
```

**タスクの粒度**:
作業を「一口サイズのタスク」（実行時間 2-5分）に分割します。
- タスク 1: インターフェースの作成
  - 手順: テストを書く
  - 手順: インターフェースを実装
  - 手順: 検証
- タスク 2: ロジックの実装...

**原則**:
- **YAGNI**: 不要な機能は削除する。
- **TDD**: 失敗条件を先に書く。
- **検証**: 各ステップの成功を検証するための正確なコマンド。

## フェーズ 2: 実行 (Executing Plans)

**プロセス**:
1. **計画のロード**: フェーズ1で作成した計画ファイルを読み込みます。
2. **レビュー**: 計画がまだ有効か批判的に評価します。
3. **バッチ実行**: 一度に1〜3個のタスクを実行します。
   - 計画書に `[x]` をマークします。
   - 検証手順を実行します。
4. **報告**: 次のバッチに進む前に、検証の出力を示します。

**停止条件**:
- ブロッカー / テストの失敗（予期せぬもの）。
- 要件の曖昧さ。
- **アクション**: 推測せず、停止してユーザーに尋ねてください。

## フェーズ 3: ブレインストーミング (オプションの前提条件)

道筋が不明確な場合は、ブレインストーミングから始めます：
1. 質問を1つずつ行います。
2. トレードオフを伴う2〜3のアプローチを提案します。
3. 小さなセクション（200〜300語）で設計を提示します。
4. 正式な計画を書く前に検証します。
