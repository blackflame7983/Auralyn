# テスト計画書 (Verification Plan)

本アプリケーションの品質、安定性、および使いやすさを確認するための手動テスト項目です。

## 更新履歴
- 2026-01-17: 既知不具合メモを整理し、検証結果ログを追記（VST3ホスト/Audio Engine改善反映）。

## 検証結果ログ（直近）
- 2026-01-17: VSTプラグインの追加/削除後もクラッシュせず、音声とレベルメーターが継続することを確認。EDITORでGUIが開くことを確認。

## 1. 基本動作テスト

### 1-1. 初回起動とウィザード
- [x] アプリケーションが正常に起動すること。
- [ ] 初回起動時にオーディオ設定（またはウィザード）が正しく表示されること。
  - 既知課題（過去ログ）: 起動時に表示されないことがあった（要再確認）。
- [x] マイク入力とスピーカー出力を選択し、エラーなくオーディオエンジンが開始すること。

### 1-2. 設定の保存と復元
- [ ] アプリを再起動した際、前回選択したデバイス設定（Host, Input, Output）が自動的に復元されること。
  - 既知課題（過去ログ）: 復元されず初期化されることがあった（要再確認）。
- [ ] 設定変更後に再起動しても、変更が反映されていること。
  - 既知課題（過去ログ）: 変更が維持されず初期化されることがあった（要再確認）。

## 2. VSTプラグイン機能

### 2-1. プラグインスキャンと検出
- [x] システムの標準フォルダ（C:\Program Files\Common Files\VST3 等）からVST3プラグインが検出されること。
- [x] プラグイン名、ベンダー名が正しく表示されること。

### 2-2. プラグインのロードとアンロード
- [x] プラグインリストから「追加」ボタンでプラグインをロードできること。
- [x] ロードしたプラグインがラックに表示されること。
- [x] プラグインの「削除（ゴミ箱アイコン）」ボタンで、エラーなく削除できること。
- [x] 音声再生中にプラグインを追加・削除しても、アプリがクラッシュしないこと。
- [x] 音声再生中にプラグインを追加・削除しても、音声が継続すること（無音化しない）。
- [x] 音声再生中にプラグインを追加・削除しても、レベルメーターが継続更新すること。

### 2-3. プラグインチェーンの操作
- [x] 複数のプラグインをロードできること。
- [x] ドラッグ＆ドロップでプラグインの順序を入れ替えられること。
- [x] 順序入れ替えが音声処理に即座に反映されること（例: リバーブ→歪み と 歪み→リバーブ の違い）。

### 2-4. パラメータ操作（エディタ）
- [x] 「EDITOR」ボタンでプラグインのGUIが開くこと。
- [x] GUIでの操作が音に反映されること。
- [x] GUIを閉じても設定が維持されること（同一セッション内）。

## 3. オーディオ品質とパフォーマンス

### 3-1. レイテンシーとノイズ
- [x] WASAPI排他モードまたはASIO使用時に、違和感のないレイテンシーでモニタリングできること。
- [x] プツプツというノイズ（Dropout）が発生しないこと。

### 3-2. CPU負荷
- [ ] プラグインを複数（3-5個程度）ロードしても動作が重くならないこと。
  - 備考: プラグイン種類により負荷が大きく変動するため、CPU%の目安も併記する。

## 4. OBS連携

### 4-1. 仮想ケーブル出力
- [ ] Output Device に `CABLE Input` (VB-Audio) などを指定して音声が出力されること。
  - 既知課題（過去ログ）: VB-Audioなどが表示されないことがあった（要再確認）。

### 4-2. OBSでの受信
- [ ] 上記ガイド通りに設定し、OBSの「音声入力キャプチャ」でレベルメーターが振れること。
- [ ] マイク音声にエフェクトがかかった状態でOBSに届いていること。

## 5. エラーハンドリング

### 5-1. デバイス切断
- [ ] (可能であれば) 使用中のUSBマイク等を抜いた際に、アプリが適切にエラーを表示するか、クラッシュせずに耐えること。
