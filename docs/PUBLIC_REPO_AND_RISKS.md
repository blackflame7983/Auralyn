# Auralyn リポジトリ公開の判断とリスク

## 結論の要約

| 選択肢 | おすすめ度 | ポイント |
|--------|------------|----------|
| **A. 開発リポジトリを公開する** | ◎ 推奨 | 自動アップデート・CI が楽。現状のまま公開しても**大きなリスクはない**。 |
| **B. 現状どおりプライベート＋別公開リポ** | ○ 可 | リリース配布だけなら問題ない。自動アップデートは別公開リポ側で完結させる必要あり。 |

**現状のコードベースをそのまま公開して問題になるような機密情報・認証情報は見当たりません。** 公開するかどうかは「運用のしやすさ」と「公開することによるメリット」で決めてよい状態です。

---

## 1. 公開した場合のリスク（現状のコードベース）

### 1.1 機密・認証まわり（現時点で問題なし）

- **API キー・トークン・パスワード**: リポジトリ内にハードコードされていない。
- **OBS のパスワード**: ユーザー入力 → `localStorage` のみ。リポジトリには含まれない。
- **アップデーター**: `tauri.conf.json` の `pubkey` は空。秘密鍵はリポジトリに含めない前提で運用すればよい。
- **`.env`**: 本番用の秘密を書く想定なら、公開前に `.gitignore` に `.env` を追加しておくことを推奨（現状は `import.meta.env.PACKAGE_VERSION` のみで問題なし）。

### 1.2 公開することで増える「一般的な」リスク

| リスク | 内容 | 対策のイメージ |
|--------|------|----------------|
| ソースの改変・フォーク | 誰でもコードを閲覧・フォークできる | ライセンス（MIT 等）で利用条件を明示する。 |
| 脆弱性の指摘 | 不具合やセキュリティ指摘が増える可能性 | Issue/PR の運用方針を README に書く。セキュリティ報告は別窓（メール等）も案内できる。 |
| 依存関係の暴露 | 使用ライブラリが全部見える | デスクトップアプリでは一般的。既に LICENSE 表示などで開示しているなら問題になりにくい。 |

いずれも「公開しないとゼロ」ではなく、多くの OSS デスクトップアプリが受けている程度のリスクです。

### 1.3 公開前に確認したい点（チェックリスト）

- [ ] **秘密鍵・パスワード・トークン**がソースや設定ファイルに含まれていないか（`tauri.conf.json` の `pubkey` は空のままでよい）。
- [ ] **個人用メモ・内部用パス・実名・メール**がコメントやドキュメントに残っていないか。
- [ ] **`review_comments.json` / `comments.json`** に GitHub の URL や PR 情報が入っている。機密ではないが、不要なら `.gitignore` に入れて履歴から外すか、公開前に削除する選択肢あり。
- [ ] **LICENSE ファイル**をリポジトリルートに置く（MIT / Apache 2.0 など）。既に別ドキュメントでライセンス方針があればそれに合わせる。

---

## 2. 運用の違い：公開 vs 非公開

### 2.1 開発リポジトリを**公開**する場合（Auralyn = パブリック）

- **メリット**
  - GitHub Actions が無料で使える（同一リポジトリでビルド → Release → `latest.json` まで自動化しやすい）。
  - 自動アップデートの設定（endpoint + pubkey + 署名付きアーティファクト）を**1 リポジトリ**で完結できる。
  - コントリビューションや Issue を一箇所で管理できる。
- **やること**
  - 上記「1.3 チェックリスト」を実施したうえで、そのまま公開してよい。
  - Release と自動アップデート用のワークフローを、**このリポジトリ**用に用意する（別ドキュメントの「自動アップデートの準備」と組み合わせる）。

### 2.2 開発リポジトリは**プライベート**のまま（現状＋別公開リポ）

- **メリット**
  - ソースを非公開のままにできる（心理的ハードルが低い）。
  - 配布用の「Auralyn-Release」のような公開リポは、**バイナリ＋更新マニフェスト専用**として維持できる。
- **デメリット・注意**
  - 無料の GitHub Actions は**プライベートリポでは月の分数制限**がある（Public なら実質ほぼ無制限）。
  - 自動アップデートを動かすには、
    - プライベート側でビルド → 成果物を公開リポの Release にアップロードする、  
    もしくは
    - 公開リポ側で「手動アップロード＋スクリプトで `latest.json` 更新」などの運用が必要。
  - 「コード」と「リリース」が 2 リポジトリに分かれるため、手順がやや複雑になる。

---

## 3. 推奨

- **自動アップデートや CI をシンプルにしたい**  
  → **Auralyn（この VSTHost）リポジトリをパブリックにし、Release もここで管理する**のがおすすめです。  
  現状のコードのまま公開してよい状態です。

- **どうしてもソースを非公開にしたい**  
  → 現状どおりプライベート＋別の公開リポで配布でも問題ありません。  
  その場合は、自動アップデート用の「ビルド → 署名 → Release アップロード → `latest.json`」を、公開リポまたは手元スクリプトでどう回すかを別途設計する必要があります。

---

## 4. 公開リポジトリ（Auralyn-Release）を「このまま別のまま」にしておくか

- **役割を分けるなら**
  - **Auralyn（VSTHost）**: ソースコード ＋ （公開するなら）Release と自動アップデート。
  - **Auralyn-Release / 公開ページ**: 「ダウンロード用の説明」「更新履歴」「ランディング」など、**ユーザー向けの入口**として残す。
- つまり、「コードと Release を 1 リポで管理する」ことにしても、**公開用の説明用リポやサイト（tech-trend-site の Auralyn ページなど）は別のまま**でよいです。  
  - 例: ダウンロードリンクを `https://github.com/blackflame7983/Auralyn-Releases/releases` に張り、実際のビルド・Release は Auralyn-Releases リポジトリで行う。

---

## 5. このドキュメントの更新

- 実際に公開する前に、もう一度「1.3 チェックリスト」と、使っている CI/スクリプト（秘密鍵の扱いなど）を確認することを推奨します。
- 公開後に、LICENSE や CONTRIBUTING、セキュリティ報告の案内を README に追記すると、運用がしやすくなります。
